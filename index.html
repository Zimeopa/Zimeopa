<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Script Web</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#020617;color:#e5e7eb}
header{padding:15px;border-bottom:1px solid #1e293b;display:flex;justify-content:space-between}
a{color:#38bdf8;text-decoration:none;margin-left:15px}
.container{max-width:1100px;margin:auto;padding:20px}
.card{border:1px solid #1e293b;border-radius:10px;padding:15px;margin-bottom:15px}
input,textarea{width:100%;padding:10px;margin:5px 0;border-radius:6px;border:none}
button{padding:8px 16px;border:none;border-radius:6px;font-weight:bold;cursor:pointer}
.btn{background:#38bdf8;color:#000}
.green{background:#22c55e;color:#000}
.red{background:#ef4444;color:#fff}
.gray{background:#334155;color:#fff}
.hide{display:none}
img{max-width:100%;border-radius:8px;margin-top:8px}
small{color:#94a3b8}
</style>
</head>

<body>

<header>
  <b>Script Web</b>
  <div id="menu">
    <a href="#scripts">Scripts</a>
    <a href="#create">T·∫°o Script</a>
  </div>
</header>

<div class="container">

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h3>Login</h3>
  <input id="nameInput" placeholder="T√™n Roblox (Player)">
  <input id="keyInput" placeholder="Key">
  <button class="btn" onclick="login()">Login</button>
</div>

<!-- CREATE -->
<div class="card hide" id="create">
  <h3>T·∫°o Script</h3>
  <input id="sName" placeholder="T√™n script">
  <input id="sImg" placeholder="Link ·∫£nh (t√πy ch·ªçn)">
  <textarea id="sDesc" placeholder="M√¥ t·∫£"></textarea>
  <textarea id="sCode" placeholder="N·ªôi dung script"></textarea>
  <button class="btn" onclick="createScript()">G·ª≠i duy·ªát</button>
</div>

<!-- PUBLIC -->
<div class="card hide" id="scripts">
  <h3>Scripts</h3>
  <input id="search" placeholder="T√¨m script..." onkeyup="renderPublic()">
  <div id="publicList"></div>
</div>

<!-- OWNER -->
<div class="card hide" id="ownerPanel">
  <h3>Duy·ªát Script (Owner)</h3>
  <div id="reviewList"></div>
</div>

</div>

<script>
/* ===== CONFIG ===== */
const OWNER_KEY = "OWNER-SSS-PLUS-999";
let user = null;
let isOwner = false;

/* ===== DATA ===== */
let pending = JSON.parse(localStorage.getItem("pending")) || [];
let approved = JSON.parse(localStorage.getItem("approved")) || [];

/* ===== LOGIN ===== */
function login(){
  const key = keyInput.value.trim();
  const name = nameInput.value.trim();

  if(key === OWNER_KEY){
    if(localStorage.getItem("ownerUsed")) return alert("Owner key ƒë√£ d√πng");
    localStorage.setItem("ownerUsed","1");
    isOwner = true;
    user = "OWNER";
  }else{
    if(!name) return alert("Nh·∫≠p t√™n Roblox");
    user = name;
  }

  loginBox.classList.add("hide");
  create.classList.remove("hide");
  scripts.classList.remove("hide");

  if(isOwner){
    ownerPanel.classList.remove("hide");
    menu.innerHTML += `<a href="#ownerPanel">C√†i ƒë·∫∑t</a>`;
  }

  renderPublic();
  renderReview();
}

/* ===== CREATE SCRIPT ===== */
function createScript(){
  if(!sName.value || !sCode.value) return alert("Thi·∫øu d·ªØ li·ªáu");

  pending.push({
    id: Date.now(),
    name: sName.value,
    img: sImg.value,
    desc: sDesc.value,
    code: sCode.value,
    author: user,
    likes: 0
  });

  save();
  sName.value=sImg.value=sDesc.value=sCode.value="";
  alert("ƒê√£ g·ª≠i duy·ªát");
}

/* ===== OWNER REVIEW ===== */
function renderReview(){
  if(!isOwner) return;
  reviewList.innerHTML="";
  pending.forEach((s,i)=>{
    reviewList.innerHTML+=`
      <div class="card">
        <b>${s.name}</b> <small>by ${s.author}</small>
        <p>${s.desc}</p>
        <button class="green" onclick="approve(${i})">Duy·ªát</button>
        <button class="red" onclick="reject(${i})">T·ª´ ch·ªëi</button>
      </div>`;
  });
}
function approve(i){
  approved.push(pending[i]);
  pending.splice(i,1);
  save();
}
function reject(i){
  pending.splice(i,1);
  save();
}

/* ===== PUBLIC ===== */
function renderPublic(){
  publicList.innerHTML="";
  const q = search.value.toLowerCase();

  approved
    .filter(s=>s.name.toLowerCase().includes(q))
    .forEach((s,i)=>{
      publicList.innerHTML+=`
        <div class="card">
          <h4>${s.name}</h4>
          <small>by ${s.author}</small>
          ${s.img?`<img src="${s.img}">`:""}
          <p>${s.desc}</p>

          <button class="gray" onclick="like(${i})">üëç ${s.likes}</button>
          <button class="btn" onclick="copyCode(${i})">üìã Copy</button>
          ${isOwner ? `<button class="red" onclick="deleteScript(${i})">üóëÔ∏è Xo√°</button>` : ``}
        </div>`;
    });
}

function like(i){
  approved[i].likes++;
  save();
}
function copyCode(i){
  navigator.clipboard.writeText(approved[i].code);
  alert("ƒê√£ copy script");
}

/* ===== OWNER DELETE ===== */
function deleteScript(i){
  if(!isOwner) return;
  if(!confirm("Owner xo√° script n√†y?")) return;
  approved.splice(i,1);
  save();
}

/* ===== SAVE ===== */
function save(){
  localStorage.setItem("pending",JSON.stringify(pending));
  localStorage.setItem("approved",JSON.stringify(approved));
  renderPublic();
  renderReview();
}
</script>

</body>
</html>
