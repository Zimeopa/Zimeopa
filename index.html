<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Roblox Script Manager</title>

<style>
body {
  background:#0b0b0b;
  color:white;
  font-family:Arial;
  margin:0;
  user-select:none;
}
header {
  background:#111;
  padding:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.box {
  background:#1c1c1c;
  margin:15px auto;
  padding:15px;
  width:360px;
  border-radius:10px;
}
input, textarea {
  width:95%;
  padding:7px;
  margin:5px;
}
button {
  background:#ff0033;
  color:white;
  border:none;
  padding:7px 12px;
  border-radius:6px;
  margin:3px;
}
.hidden { display:none; }
.scriptBox {
  background:black;
  padding:10px;
  margin-top:10px;
}
.settings {
  position:fixed;
  top:50px;
  right:10px;
  background:#1a1a1a;
  padding:10px;
  width:250px;
  border-radius:10px;
}
</style>
</head>

<body>

<header>
  <b id="gameTitle">ğŸ® Roblox Script Hub</b>
  <button id="settingBtn" class="hidden" onclick="toggleSettings()">âš™ï¸</button>
</header>

<!-- LOGIN -->
<div class="box" id="loginBox">
<h3>ÄÄƒng nháº­p</h3>
<input id="username" placeholder="TÃªn Roblox chÃ­nh xÃ¡c">
<input id="ownerKey" placeholder="Owner Key (náº¿u cÃ³)">
<button onclick="login()">ÄÄƒng nháº­p</button>
</div>

<!-- PLAYER VIEW -->
<div class="box hidden" id="playerView">
<h3>ğŸ“œ Script Roblox</h3>
<input id="searchScript" placeholder="TÃ¬m script">
<button onclick="showScripts()">TÃ¬m</button>
<div id="scriptList"></div>
</div>

<!-- SETTINGS -->
<div class="settings hidden" id="settings">
<h4>âš™ï¸ CÃ i Ä‘áº·t</h4>

<input id="newGameName" placeholder="TÃªn game Roblox">
<button onclick="setGame()">LÆ°u tÃªn game</button>

<hr>

<input id="scriptName" placeholder="TÃªn script">
<textarea id="scriptCode" placeholder="Script Roblox"></textarea>
<button onclick="addOrUpdateScript()">â• / ğŸ”„ Script</button>

<button onclick="notifyAll()">ğŸ“¢ ThÃ´ng bÃ¡o update</button>
</div>

<script>
// ===== LOAD DATA =====
let data = JSON.parse(localStorage.getItem("hubData")) || {
  ownerKey: "OWNER-KEY-ONE-TIME",
  users: {},
  scripts: [],
  gameName: "Roblox Script Hub"
};

let currentUser = null;

// ===== SAVE =====
function save() {
  localStorage.setItem("hubData", JSON.stringify(data));
}

// ===== LOGIN =====
function login() {
  let name = username.value.trim();
  let key = ownerKey.value.trim();
  if (!name) return alert("Nháº­p tÃªn Roblox!");

  let rank = "Player";

  if (key && key === data.ownerKey) {
    rank = "Owner";
    data.ownerKey = null;
    alert("Owner Ä‘Äƒng nháº­p!");
  }

  data.users[name] = rank;
  currentUser = {name, rank};
  save();

  loginBox.classList.add("hidden");
  playerView.classList.remove("hidden");

  gameTitle.textContent = "ğŸ® " + data.gameName;

  if (rank !== "Player") {
    settingBtn.classList.remove("hidden");
  }

  showScripts();
}

// ===== SETTINGS =====
function toggleSettings() {
  settings.classList.toggle("hidden");
}

function setGame() {
  data.gameName = newGameName.value;
  gameTitle.textContent = "ğŸ® " + data.gameName;
  save();
}

// ===== SCRIPT =====
function addOrUpdateScript() {
  let name = scriptName.value;
  let code = scriptCode.value;
  if (!name || !code) return alert("Thiáº¿u thÃ´ng tin!");

  let s = data.scripts.find(x => x.name === name);
  if (s) s.code = code;
  else data.scripts.push({name, code});

  save();
  alert("ÄÃ£ lÆ°u script!");
  showScripts();
}

function showScripts() {
  let key = searchScript.value.toLowerCase();
  scriptList.innerHTML = "";

  data.scripts
    .filter(s => s.name.toLowerCase().includes(key))
    .forEach(s => {
      let div = document.createElement("div");
      div.className = "scriptBox";
      div.innerHTML = `
        <b>${s.name}</b><br><br>
        <button onclick="downloadScript('${s.name}')">ğŸ“ƒ LÆ°u Script</button>
      `;
      scriptList.appendChild(div);
    });
}

// ===== DOWNLOAD =====
function downloadScript(name) {
  let s = data.scripts.find(x => x.name === name);
  let blob = new Blob([s.code], {type:"text/plain"});
  let a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = name + ".txt";
  a.click();
}

// ===== NOTIFY =====
function notifyAll() {
  alert("ğŸ“¢ Script vá»«a Ä‘Æ°á»£c UPDATE!");
}

save();
</script>

</body>
</html>
