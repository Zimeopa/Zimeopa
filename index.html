<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Roblox Script Hub</title>

<style>
body{
  margin:0;
  background:#0b0e1a;
  color:#fff;
  font-family:Arial
}
header{
  background:#15193a;
  padding:15px;
  text-align:center
}
input,textarea,button{
  width:100%;
  margin:5px 0;
  padding:10px;
  border:none;
  border-radius:8px
}
button{
  background:#5865f2;
  color:white;
  cursor:pointer
}
.page{display:none;padding:15px}
.card{
  background:#15193a;
  margin:10px 0;
  padding:15px;
  border-radius:12px
}
.actions button{
  width:auto;
  font-size:18px;
  margin-right:5px
}
.saved{background:#22c55e}
</style>
</head>

<body>

<header>
<h1>ğŸ•¹ ROBLOX SCRIPT HUB</h1>
<div id="profile"></div>
</header>

<!-- LOGIN -->
<div id="login" class="page">
<h2>ğŸ” ÄÄƒng nháº­p</h2>
<input id="username" placeholder="TÃªn Roblox">
<input id="key" placeholder="Key (Owner / Staff)">
<button onclick="login()">ÄÄƒng nháº­p</button>
<p id="msg"></p>
</div>

<!-- MAIN -->
<div id="main" class="page">

<input id="search" placeholder="ğŸ” TÃ¬m script..." onkeyup="searchScript()">

<div id="addScript">
<h3>â• ThÃªm Script</h3>
<input id="title" placeholder="TÃªn script">
<textarea id="code" placeholder="Code script"></textarea>
<button onclick="addScript()">ThÃªm</button>
</div>

<button onclick="showAll()">ğŸŒ Táº¥t cáº£</button>
<button onclick="showSaved()">ğŸ“ƒ Script Ä‘Ã£ lÆ°u</button>

<div id="scripts"></div>
</div>

<script>
// ====== CONFIG ======
const OWNER_KEY = "OWNER-ONE-TIME-999"; // ğŸ‘‘ KEY 1 Láº¦N
const MANAGER_KEY = "MANAGER-111";      // ğŸ§  KEY ANH

// ====== LOGIN ======
function login(){
  const name = username.value.trim();
  const k = key.value.trim();
  if(!name){msg.innerText="âŒ Nháº­p tÃªn";return;}

  let rank="PLAYER";
  let owner = localStorage.getItem("ownerName");

  if(!owner && k===OWNER_KEY){
    localStorage.setItem("ownerName",name);
    rank="OWNER";
    alert("ğŸ‘‘ Owner Ä‘Ã£ kÃ­ch hoáº¡t, key Ä‘Ã£ bá»‹ huá»·");
  }
  else if(owner && name===owner){
    rank="OWNER";
  }
  else if(k===MANAGER_KEY){
    rank="MANAGER";
  }
  else if(k.startsWith("ADMIN-")){
    rank="ADMIN";
  }

  localStorage.setItem("user",JSON.stringify({name,rank}));
  init();
}

// ====== INIT ======
function init(){
  const user = JSON.parse(localStorage.getItem("user"));
  if(!user){loginPage();return;}

  login.style.display="none";
  main.style.display="block";
  profile.innerText=`ğŸ‘¤ ${user.name} | ğŸ– ${user.rank}`;

  if(user.rank==="PLAYER"){
    addScript.style.display="none";
  }
  render();
}

function loginPage(){
  login.style.display="block";
  main.style.display="none";
}

// ====== SCRIPT DATA ======
let scripts = JSON.parse(localStorage.getItem("scripts"))||[];

function saveAll(){
  localStorage.setItem("scripts",JSON.stringify(scripts));
}

function render(list=scripts){
  const user = JSON.parse(localStorage.getItem("user"));
  scriptsDiv.innerHTML="";
  list.forEach(s=>{
    const saved = getSaved().includes(s.id);
    scriptsDiv.innerHTML+=`
    <div class="card" data-id="${s.id}">
      <h3>${saved?"ğŸ“ƒ ":""}${s.title}</h3>
      <textarea readonly>${s.code}</textarea>
      <div class="actions">
        <button onclick="copy(this)">ğŸ“‹</button>
        <button class="${saved?"saved":""}" onclick="saveScript(this)">ğŸ“ƒ</button>
        ${user.rank==="OWNER"?`<button onclick="del(this)">ğŸ—‘</button>`:""}
      </div>
    </div>`;
  });
}

// ====== ACTIONS ======
function addScript(){
  const user = JSON.parse(localStorage.getItem("user"));
  if(!["OWNER","ADMIN"].includes(user.rank))return;
  scripts.unshift({
    id:Date.now(),
    title:title.value,
    code:code.value
  });
  saveAll();
  render();
}

function del(btn){
  const id=btn.closest(".card").dataset.id;
  scripts=scripts.filter(s=>s.id!=id);
  saveAll();
  render();
}

function copy(btn){
  const t=btn.closest(".card").querySelector("textarea");
  t.select();document.execCommand("copy");
}

function getSaved(){
  const u=JSON.parse(localStorage.getItem("user")).name;
  return JSON.parse(localStorage.getItem("saved_"+u))||[];
}

function saveScript(btn){
  const u=JSON.parse(localStorage.getItem("user")).name;
  const id=btn.closest(".card").dataset.id;
  let s=getSaved();
  s=s.includes(id)?s.filter(x=>x!=id):[...s,id];
  localStorage.setItem("saved_"+u,JSON.stringify(s));
  render();
}

function showSaved(){
  render(scripts.filter(s=>getSaved().includes(s.id)));
}

function showAll(){render();}

function searchScript(){
  const v=search.value.toLowerCase();
  render(scripts.filter(s=>s.title.toLowerCase().includes(v)));
}

// START
init();
</script>

</body>
</html>
